module axi_stream_master (
    input clk,
    input rst_n,
    input tready,
    
    input wen,
    input [31:0] din,
    input [2:0] wa,
    
    output tvalid,
    output [31:0] tdata
);

  reg [2:0] addr;
  reg [31:0] sram [7:0];
  reg [31:0] sram_data;
  reg [31:0] rdata;
  
 
  // sram
  always @(posedge clk) begin
    sram_data <= sram[addr];
    if(wen) sram[wa] <= din;
  end
  
  
  // control
  always @(posedge clk) begin
    rdata <= sram_data;
    if(~rst_n) addr <= 3'b0;
    else if(~tready) addr <= addr + 3'd1;
  end
  
  assign tvalid = (addr >= 'b0);
  assign tdata = tready ? rdata : sram_data;

endmodule
